<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator using JavaSript</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
       
        <div class="calculator">
             <div class="top-panel">
            <button type ="button" class="history-btn" onclick="toggleHistory()">History</button>
        </div>
            <form>
               
                <div class="display">
                    <input type="text" name="display" id="display">
                </div>
                <div>
                <input type="button" value="AC" onclick="display.value = ''" class="operator">
                <input type="button" value="DE" onclick="display.value = display.value.slice(0, -1)" class="operator">
                <input type="button" value="." onclick="display.value += '.'" class="operator">
                <input type="button" value="/" onclick="display.value += '/'" class="operator">
                </div>
                <div>
                <input type="button" value="7" onclick="display.value +='7'">
                <input type="button" value="8"onclick="display.value +='8'">
                <input type="button" value="9" onclick="display.value +='9'">
                <input type="button" value="*" onclick="display.value +='*'" class="operator">
                </div>
                <div>
                <input type="button" value="4" onclick="display.value += '4' ">
                <input type="button" value="5" onclick="display.value += '5' ">
                <input type="button" value="6" onclick="display.value += '6' ">
                <input type="button" value="-" onclick="display.value += '-' " class="operator">
                </div>
                <div>
                <input type="button" value="1" onclick="display.value += '1'">
                <input type="button" value="2" onclick="display.value += '2'">
                <input type="button" value="3" onclick="display.value += '3'">
                <input type="button" value="+" onclick="display.value += '+'" class="operator">
                </div>
                <div>
                <input type="button" value="00" onclick="display.value += '00'">
                <input type="button" value="0" onclick="display.value += '0'">
                <input type="button" value="=" class="equal operator" onclick="calculate()">
                
                </div>
            </form>
        </div>
         <div class="history-panel" id="history-panel">
                    <h3>History</h3>
            <div class="history" id="history"></div>
            </div>
    </div>
  <script>
    const display = document.getElementById("display");
    const historyPanel = document.getElementById("history-panel");

    function calculate(){
        let expression = display.value;

        try{
            let result = eval(expression);

            let historyDiv = document.getElementById("history");
            let entry = document.createElement("div");
            entry.innerText = expression + " = " + result;
            historyDiv.appendChild(entry);

            // localStorage save
            let savedHistory = localStorage.getItem("calcHistory");
            let historyArray = savedHistory ? JSON.parse(savedHistory) : [];
            historyArray.push(expression + " = " + result);
            localStorage.setItem("calcHistory", JSON.stringify(historyArray));

            display.value = result;
        }
        catch{
            display.value = "Error";
        }
    }

    function toggleHistory(){
        historyPanel.classList.toggle("active");
    }

    function loadHistory(){
        let savedHistory = localStorage.getItem("calcHistory");
        if(savedHistory){
            let historyArray = JSON.parse(savedHistory);
            let historyDiv = document.getElementById("history");

            historyArray.forEach(item => {
                let entry = document.createElement("div");
                entry.innerText = item;
                historyDiv.appendChild(entry);
            });
        }
    }

    window.onload = loadHistory;
</script>

</body>
</html>